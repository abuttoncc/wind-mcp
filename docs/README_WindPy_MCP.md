# WindPy MCP Server 支持的API文档

本服务仅支持以下六个WindPy核心函数：

- w.wsd（获取日时间序列数据）
- w.wss（获取日截面数据）
- w.wses（获取板块日序列数据）
- w.tdays（获取区间内日期序列）
- w.tdaysoffset（获取偏移后的日期）
- w.tdayscount（获取区间内日期数量）

---

## 1. 获取日时间序列数据 w.wsd

**`w.wsd(codes, fields, beginTime, endTime, options)`**

- **参数说明**

| 参数      | 类型          | 必选 | 说明                                                         |
| :-------- | :------------ | :--- | :----------------------------------------------------------- |
| codes     | str或list     | 是   | 证券代码，支持单个或多个，如"600030.SH"或[“600010.SH”,“000001.SZ”] |
| fields    | str或list     | 是   | 指标列表,支持单指标或多指标，如"CLOSE,HIGH,LOW,OPEN"         |
| beginTime | str/datetime  | 是   | 起始日期，如: "2016-01-01"、"20160101"、"-5D"(前推5个交易日) |
| endTime   | str/datetime  | 是   | 截止日期，如: "2016-01-05"、"20160105"、"-2D"(前推2个交易日) |
| options   | str           | 否   | 以分号分隔的可选参数，如"Period=W;Days=Trading"             |

- **返回说明**

| 字段      | 说明                                                         |
| :-------- | :----------------------------------------------------------- |
| ErrorCode | 返回代码，0为正常，其他为错误码                              |
| Data      | 数据列表                                                     |
| Codes     | 证券代码列表                                                 |
| Fields    | 指标列表                                                     |
| Times     | 时间列表                                                     |

- **示例**
```python
history_data = w.wsd("010107.SH", "sec_name,ytm_b,volume", "2018-06-01", "2018-06-11", "returnType=1;PriceAdj=CP")
```

---

## 2. 获取日截面数据 w.wss

**`w.wss(codes, fields, options)`**

- **参数说明**

| 参数    | 类型      | 必选 | 说明                                                         |
| :------ | :-------- | :--- | :----------------------------------------------------------- |
| codes   | str或list | 是   | 证券代码，支持单个或多个，如"600030.SH"或[“600010.SH”,“000001.SZ”] |
| fields  | str或list | 是   | 指标列表，支持多指标，如"CLOSE,HIGH,LOW,OPEN"                |
| options | str       | 否   | 以分号分隔的可选参数，如"tradeDate=20230601"                |

- **返回说明**

| 字段      | 说明                                                         |
| :-------- | :----------------------------------------------------------- |
| ErrorCode | 返回代码，0为正常，其他为错误码                              |
| Data      | 数据列表                                                     |
| Codes     | 证券代码列表                                                 |
| Fields    | 指标列表                                                     |
| Times     | 时间列表（如有）                                             |

- **示例**
```python
error_code, returns = w.wss(["600111.SH", "600340.SH"], "sec_name,return_1w,return_1m", "tradeDate=20180611")
```

---

## 3. 获取板块日序列数据 w.wses

**`w.wses(codes, fields, beginTime, endTime, options)`**

- **参数说明**

| 参数      | 类型 | 必选 | 说明                                                         |
| :-------- | :--- | :--- | :----------------------------------------------------------- |
| codes     | str  | 是   | 板块ID，支持单个或多个，如"a001010200000000"或"a001010200000000,a001010100000000" |
| fields    | str  | 是   | 仅支持单指标，如"sec_close_avg"                              |
| beginTime | str  | 是   | 起始日期，如: "2016-01-01"、"20160101"、"-5D"              |
| endTime   | str  | 是   | 截止日期，如: "2016-01-05"、"20160105"、"-2D"              |
| options   | str  | 否   | 以分号分隔的可选参数，如"Period=W;Days=Trading"             |

- **返回说明**

| 字段      | 说明                                                         |
| :-------- | :----------------------------------------------------------- |
| ErrorCode | 返回代码，0为正常，其他为错误码                              |
| Data      | 数据列表                                                     |
| Codes     | 板块ID列表                                                   |
| Fields    | 指标列表                                                     |
| Times     | 时间列表                                                     |

- **示例**
```python
errorCode, data = w.wses("a001010200000000,a001010100000000", "sec_close_avg", "2018-08-21", "2018-08-27", "")
```

---

## 4. 获取区间内日期序列 w.tdays

**`w.tdays(beginTime, endTime, options)`**

- **参数说明**

| 参数      | 类型 | 必选 | 说明                                                         |
| :-------- | :--- | :--- | :----------------------------------------------------------- |
| beginTime | str  | 是   | 起始日期，如: "2018-05-13"、"20180513"、"-5D"              |
| endTime   | str  | 是   | 截止日期，如: "2018-06-13"、"20180613"、"-2D"              |
| options   | str  | 否   | 以分号分隔的可选参数，如"Days=Trading;Period=W"             |

- **返回说明**

| 字段      | 说明                                                         |
| :-------- | :----------------------------------------------------------- |
| ErrorCode | 返回代码，0为正常，其他为错误码                              |
| TradingDays | 日期字符串列表                                             |

- **示例**
```python
date_list = w.tdays("2018-05-13", "2018-06-13", "Days=Trading")
```

---

## 5. 获取偏移后的日期 w.tdaysoffset

**`w.tdaysoffset(offset, beginTime, options)`**

- **参数说明**

| 参数      | 类型 | 必选 | 说明                                                         |
| :-------- | :--- | :--- | :----------------------------------------------------------- |
| offset    | int  | 是   | 偏移参数，>0后推，<0前推                                     |
| beginTime | str  | 是   | 参照日期，如: "2018-01-01"、"20180101"、"-5D"              |
| options   | str  | 否   | 以分号分隔的可选参数，如"Days=Trading;Period=M"             |

- **返回说明**

| 字段      | 说明                                                         |
| :-------- | :----------------------------------------------------------- |
| ErrorCode | 返回代码，0为正常，其他为错误码                              |
| OffsetDate | 偏移后日期字符串                                            |

- **示例**
```python
offset_date = w.tdaysoffset(-10, "2023-06-01", "Period=M;Days=Alldays")
```

---

## 6. 获取区间内日期数量 w.tdayscount

**`w.tdayscount(beginTime, endTime, options)`**

- **参数说明**

| 参数      | 类型 | 必选 | 说明                                                         |
| :-------- | :--- | :--- | :----------------------------------------------------------- |
| beginTime | str  | 是   | 起始日期，如: "2018-01-01"、"20180101"、"-5D"              |
| endTime   | str  | 是   | 截止日期，如: "2018-12-31"、"20181231"、"-2D"              |
| options   | str  | 否   | 以分号分隔的可选参数，如"Days=Trading"                      |

- **返回说明**

| 字段      | 说明                                                         |
| :-------- | :----------------------------------------------------------- |
| ErrorCode | 返回代码，0为正常，其他为错误码                              |
| Count     | 区间内日期数量                                               |

- **示例**
```python
days = w.tdayscount("2018-01-01", "2018-12-31", "Days=Trading")
```

---

## 7. 日期宏说明

- 支持相对日期表达方式：如-5D（前推5个日历日）、-10TD（前推10个交易日）、-1M（前推1个月）等。
- 支持特殊日期宏：如ED（截止日期）、SD（开始日期）、IPO（上市首日）、RMF（本月初）、LYE（上年末）等。
- 具体用法见各API参数说明。

---

> 本文档内容参考WindPy官方文档，仅保留本服务支持的API及其参数、返回、示例和日期宏说明。 